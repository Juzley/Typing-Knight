<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script type="text/javascript" src="src/Controls.js"></script>
	<script type="text/javascript" src="src/Convert.js"></script>
	<script type="text/javascript" src="src/GameLoop.js"></script>
	<script type="text/javascript" src="src/Stage.js"></script>
	<script type="text/javascript" src="src/Veggie.js"></script>
	<script type="text/javascript" src="src/VeggieFactory.js"></script>
	<script type="text/javascript" src="src/VeggieLauncher.js"></script>
	<script type="text/javascript" src="src/ComboNotice.js"></script>
	<script type="text/javascript" src="src/ScoreBoard.js"></script>
	<link rel="stylesheet" href="bootstrap.yeti.min.css" />
	<title>Salad Knight</title>
	<script>
		var stage,scoreBoard;
		window.onload = function(){
			var canvas = document.getElementById('canvas');
			stage = new Stage(
				canvas,
				document.getElementById('img'),
				500,300);
			var gameLoop = new GameLoop(stage);
			var veggieLauncher = new VeggieLauncher(stage);
			var controls = new Controls(canvas,stage,gameLoop,veggieLauncher);
			scoreBoard = new ScoreBoard(controls,stage);
			stage.init();
			controls.init();
			scoreBoard.init();
			stage.draw();
			controls.on('combo',function(comboSize,x,y){
				stage.notices.push(new ComboNotice(comboSize,x,y));
			});
			function launch(){
				veggieLauncher.randomLaunch(VeggieFactory.randomSet());
			}
			setInterval(function(){
				if(gameLoop.isRunning()){
					launch();
				}
			}, 2500)
			gameLoop.on('start',function(){
				launch();
			});
		};
	</script>
</head>
<body>
	<div class="container text-center">
		<img src="SaladKnight.gif">
		<hr>
		<p class="lead">It's like <a href="http://fruitninja.com/">Fruit Ninja</a> but with Veggies</p>
		<hr>

		<img id="img" src="veggies.png" style="display:none;"/>
		<canvas id="canvas"></canvas>
		<br>
		<br>
		<kbd>Space</kbd> Play/Pause
		<span style="padding:0 1em;" class="text-muted">&bull;</span>
		<kbd>Swipe</kbd> Slice veggies
		<br>
		<br>
		<br>
		<a href="test.html">Tests</a>
	</div>
</body>
</html>

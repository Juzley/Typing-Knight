<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script type="text/javascript" src="src/Controls.js"></script>
	<script type="text/javascript" src="src/Convert.js"></script>
	<script type="text/javascript" src="src/GameLoop.js"></script>
	<script type="text/javascript" src="src/Stage.js"></script>
	<script type="text/javascript" src="src/Veggie.js"></script>
	<script type="text/javascript" src="src/VeggieFactory.js"></script>
	<script type="text/javascript" src="src/VeggieLauncher.js"></script>
	<link rel="stylesheet" href="bootstrap.yeti.min.css" />
	<title>Salad Knight</title>
	<script>
		window.onload = function(){
			var canvas = document.getElementById('canvas');
			var stage = new Stage(
				canvas,
				document.getElementById('img'),
				500,300);
			var gameLoop = new GameLoop(stage);
			var veggieLauncher = new VeggieLauncher(stage);
			var controls = new Controls(canvas,gameLoop,veggieLauncher);
			stage.init();
			controls.init();
			stage.draw();
			controls.on('swipemove',function(x,y){
				stage.getVeggiesAt(x, y).forEach(function(veggie){
					stage.splitVeggie(veggie);
				});
			});
			function launch(){
				veggieLauncher.randomLaunch(VeggieFactory.randomSet());
			}
			setInterval(function(){
				if(gameLoop.isRunning()){
					launch();
				}
			}, 2500)
			gameLoop.on('start',function(){
				launch();
			});
		};
	</script>
</head>
<body>
	<div class="container">
		<div class="page-header">
			<h1>Salad Knight</h1>
			<p class="lead">Fruit Ninja but with Veggies</p>
		</div>
		<div class="row">
			<div class="col-md-8">
				<img id="img" src="vegetables.png" style="display:none;"/>
				<canvas id="canvas"></canvas>
				<br>
				<a href="tests.html">Tests</a>
			</div>
			<div class="col-md-4">
				<h2>Controls</h2>
				<kbd>Space</kbd> Play/Pause
				<br>
				<kbd>Swipe</kbd> Slice veggies
			</div>
		</div>
	</div>
</body>
</html>
